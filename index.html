<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Seguran√ßa do Trabalho - SST</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
 <!-- ====== Bibliotecas externas ====== -->
<script defer src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/jspdf-autotable@3.8.2/dist/jspdf.plugin.autotable.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js">

<meta name="description" content="Painel T√©cnico de Seguran√ßa do Trabalho - SST">
<meta name="author" content="Vytor Vilar">
<meta http-equiv="Content-Security-Policy" content="default-src 'self' https: data:;">
<meta http-equiv="X-Content-Type-Options" content="nosniff">
<meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">

 </script>
<style>
  :root {
  --bg: #f9fafb;           /* Fundo geral suave (quase branco) */
  --fg: #0f172a;           /* Texto principal bem escuro */
  --muted: #64748b;        /* Texto secund√°rio */
  --card: #ffffff;         /* Cart√µes e blocos */
  --border: #e2e8f0;       /* Linhas e divis√≥rias */
  --primary: #1b7c4b;      /* Verde principal (corporativo) */
  --primary-700: #166534;  /* Verde mais escuro para hover */
  --accent: #22c55e;       /* Verde claro de destaque */
  --nav: #155e33;          /* Verde profundo da barra de navega√ß√£o */
  --ok: #16a34a;           /* Verde sucesso */
  --warn: #eab308;         /* Amarelo alerta */
  --err: #dc2626;          /* Vermelho erro */
  --shadow: 0 8px 16px rgba(0,0,0,0.08);
}

body {
  background: var(--bg) url('https://www.transparenttextures.com/patterns/gray-jean.png');
  background-attachment: fixed;
  background-size: 400px;
}

  *{box-sizing:border-box}
  body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin:0; background: var(--bg); color:var(--fg); }
  header { background: linear-gradient(135deg, var(--primary), #1d2935); color: #fff; padding: 22px 16px; text-align: center; position: sticky; top:0; z-index: 50; box-shadow: var(--shadow); }
  header h1{ margin:0; font-size: clamp(1.2rem, 2.5vw, 1.6rem); letter-spacing:.3px }
  nav {
    background: var(--nav);
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap:4px;
    padding: 6px;
    position: F;
    top:72px;
    z-index: 49;
  }
  nav button {
    background: rgba(255,255,255,.06); border: 1px solid rgba(255,255,255,0.12); color: #fff; padding: 10px 14px;
    font-size: .95rem; cursor: pointer; transition: transform .08s ease, background .2s ease, border-color .2s ease;
    border-radius: 10px;
  }
  nav button:hover { background: rgba(255,255,255,.14); transform: translateY(-1px); }
  nav button.active { background: #111827; border-color: rgba(255,255,255,.25); }
   .theme-toggle {
    position: absolute; right: 12px; top: 12px;
    background: #1f2937; color: #fff; border: 1px solid rgba(255,255,255,0.25);
    padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 0.9rem;
  }
  .theme-toggle:hover { filter: brightness(1.1); }
   main{ max-width: 1100px; margin: 18px auto; padding: 0 14px; }
  section { display: none; }
  section.active { display: block; }
   h2 { color: var(--primary); border-bottom: 2px solid var(--primary); padding-bottom: 6px; font-size: 1.15rem; display:flex; align-items:center; gap:10px }
  h2 .tools{ margin-left:auto; display:flex; gap:8px; }
   .action {
    background-color: var(--primary); color: white; padding: 9px 14px;
    font-size: 0.9rem; border: none; border-radius: 8px; cursor: pointer;
    transition: transform .08s ease, background-color 0.2s ease, box-shadow .2s;
    box-shadow: var(--shadow);
  }
  .action:hover { background-color: var(--primary-700); transform: translateY(-1px); }
   textarea, input, select {
    width: 100%; padding: 11px 12px; margin-bottom: 14px;
    border: 1px solid var(--border); border-radius: 10px; font-size: 1rem; background:var(--card); color:var(--fg);
    box-shadow: 0 1px 0 rgba(0,0,0,.02);
  }
   .output, .bloco {
    background: var(--card); padding: 16px; border-radius: 12px;
    box-shadow: var(--shadow); margin-bottom: 16px; border:1px solid var(--border);
  }
  .bloco h3{ margin-top:0 }
   .bloco.fisico { border-left: 6px solid #3b82f6; }
  .bloco.biologico { border-left: 6px solid #22c55e; }
  .bloco.quimico { border-left: 6px solid #ef4444; }
   .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 16px; }
  .item { background: var(--card); border-radius: 14px; padding: 14px; text-align: center; box-shadow: var(--shadow); border:1px solid var(--border); display:flex; flex-direction:column; gap:8px }
  .item img { width: 100%; max-width: 160px; height: 160px; margin: 0 auto 10px; border-radius:10px; object-fit: contain; display:block; }
  .item h3{ font-size:1rem; margin:4px 0 0 0 }
  .muted{ color: var(--muted); font-size:.9rem }
  footer { text-align: center; font-size: 0.8rem; color: #555; padding: 12px; background: #eaeaea; margin-top: 26px; border-top:1px solid var(--border) }
  small { color: #6b7280; }
   .badge{
    display:inline-flex; align-items:center; gap:6px; padding:4px 8px; border-radius: 999px;
    background: #eef2ff; color:#3730a3; border:1px solid #e0e7ff; font-size:.8rem
  }
   .toast{
    position: fixed; right: 16px; bottom: 16px; background: #111827; color:#e5e7eb; padding: 12px 14px; border-radius: 10px; box-shadow: var(--shadow); opacity:0; transform: translateY(8px);
    transition: opacity .2s, transform .2s; z-index: 80; border:1px solid rgba(255,255,255,.12)
  }
  .toast.show{ opacity:1; transform: translateY(0) }
  .toast.ok{ background:#065f46 }
  .toast.err{ background:#7f1d1d }
   .modal-backdrop{
    position: fixed; inset:0; background: rgba(0,0,0,.45); display:none; align-items:center; justify-content:center; z-index: 90; padding: 16px;
  }
  .modal{
    width: 100%; max-width: 420px; background: var(--card); border:1px solid var(--border); border-radius: 14px; box-shadow: var(--shadow); padding: 18px;
  }
  .modal h3{ margin:0 0 8px 0 }
  .modal-actions{ display:flex; gap:10px; justify-content:flex-end; }
   .row{ display:flex; gap:10px; flex-wrap:wrap }
  .row > *{ flex: 1 1 200px }
  .hint{ font-size:.85rem; color:var(--muted) }
   /* Accordion FAQ */
  .accordion-item { border: 1px solid var(--border); border-radius: 8px; margin-bottom: 8px; overflow: hidden; box-shadow: var(--shadow); }
  .accordion-header { width: 100%; text-align: left; padding: 10px 14px; font-weight: 600; background: var(--primary); color: #fff; border: none; cursor: pointer; }
  .accordion-header:hover { filter: brightness(1.1); }
  .accordion-body { display: none; padding: 12px 14px; background: var(--card); color: var(--fg); font-size: 0.95rem; }
  .accordion-item.active .accordion-body { display: block; }
 .copy-btn {
  background: #4f6b8a; /* azul mais claro */
  color: #fff;
  border: none;
  border-radius: 8px;
  padding: 6px 12px;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: background 0.25s, transform 0.1s ease;
  box-shadow: var(--shadow);
}
 .copy-btn svg {
  width: 16px;
  height: 16px;
  fill: currentColor;
}
 .copy-btn:hover {
  background: #6b87a6; /* cor mais clara no hover */
  transform: translateY(-1px);
}
 
 /* === Alinhamento total e uniforme dos CAs e bot√µes === */
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap: 16px;
  align-items: stretch;
}
 .item {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  align-items: center;
  height: 100%;
  min-height: 420px; /* üîß garante altura uniforme em todos os cards */
  text-align: center;
}
 /* Uniformiza a altura das imagens */
.item img {
  width: 100%;
  max-width: 160px;
  height: 160px;
  object-fit: contain;
  margin: 0 auto 8px;
  display: block;
}
 /* Altura consistente dos t√≠tulos */
.item h3 {
  flex-grow: 1;
  display: flex;
  align-items: flex-start;
  justify-content: center;
  text-align: center;
  min-height: 60px;
  margin-bottom: 4px;
}
 /* Centraliza e alinha CAs e bot√µes perfeitamente */
.ca-container {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  width: 100%;
  margin-top: auto;
}
 .ca-container .badge {
  font-size: 0.9rem;
  padding: 6px 10px;
  white-space: nowrap;
}
 .copy-btn {
  min-width: 110px;
  text-align: center;
}
 /* Chat embutido */
#openHelpChat { width:50px; height:50px; border-radius:50%; box-shadow:var(--shadow); background:var(--primary); color:#fff; border:none; cursor:pointer; }
.chat-box {
  position: fixed; right: 20px; bottom: 80px; width:320px; max-width:92vw; height:420px; display:none; flex-direction:column; background:var(--card); border:1px solid var(--border); border-radius:10px; box-shadow:var(--shadow); z-index:101;
}
.chat-box.active { display:flex; }
#chatMsgs { padding:10px; overflow:auto; flex:1; font-size:0.95rem; background: linear-gradient(180deg,#fff, #f7f9fc); }
.chat-msg.user{ text-align:right; margin:8px 0; }
.chat-msg.bot{ text-align:left; margin:8px 0; }
.chat-msg .bubble { display:inline-block; padding:8px 10px; border-radius:8px; max-width:85%; }
.chat-msg.user .bubble{ background:#eef2ff; }
.chat-msg.bot .bubble{ background:#f3f4f6; }
 .chat-box {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 10px;
  box-shadow: var(--shadow);
  display: none;
  flex-direction: column;
  height: 420px;
  max-width: 320px;
  position: fixed;
  right: 20px;
  bottom: 80px;
  z-index: 101;
}
 .chat-msg.user .bubble {
  background: #dbeafe;
  color: #1e3a8a;
  text-align: right;
}
 .chat-msg.bot .bubble {
  background: #f3f4f6;
  color: #111827;
  text-align: left;
}
 //* ====== Espa√ßamento mais confort√°vel entre se√ß√µes ====== */
main section {
  margin-top: 32px;           /* espa√ßo entre se√ß√µes */
  padding-top: 16px;          /* espa√ßo interno */
  border-top: 1px solid var(--border); /* separador visual sutil */
}
 /* ====== Bot√µes com √≠cones e diferencia√ß√£o por fun√ß√£o ====== */
button.action {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  font-weight: 500;
  transition: background-color 0.25s ease, transform 0.1s ease;
}
 button.action[data-copy] {
  background-color: #2563eb; /* azul - a√ß√£o de c√≥pia */
}
button.action[data-copy]:hover {
  background-color: #1e40af;
  transform: translateY(-1px);
}
 button.action.exportar {
  background-color: #047857; /* verde - a√ß√£o de exportar */
}
button.action.exportar:hover {
  background-color: #065f46;
  transform: translateY(-1px);
}
 /* √çcones nos bot√µes */
button.action::before {
  font-size: 1.1rem;
}
button.action[data-copy]::before {
  content: "üìã ";
}
button.action.exportar::before {
  content: "‚¨áÔ∏è ";
}
 /* ====== MICROANIMA√á√ïES E RESPONSIVIDADE ====== */
 /* Suaviza transi√ß√µes entre abas */
section {
  opacity: 0;
  transform: translateY(10px);
  transition: opacity 0.4s ease, transform 0.3s ease;
}
section.active {
  opacity: 1;
  transform: translateY(0);
}
 /* Efeito hover em cards */
.item, .item-card, .bloco {
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}
.item:hover, .item-card:hover, .bloco:hover {
  transform: translateY(-3px);
  box-shadow: 0 12px 24px rgba(0,0,0,0.12);
}
 /* Bot√µes com microanima√ß√£o */
button.action, nav button {
  transition: background-color 0.25s ease, transform 0.1s ease;
}
button.action:hover, nav button:hover {
  transform: translateY(-2px);
}
 /* Fade suave no toast */
.toast {
  transition: opacity 0.4s ease, transform 0.4s ease;
}
 /* Fade-in para elementos carregados dinamicamente */
.fade-in {
  animation: fadeInUp 0.5s ease both;
}
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
 /* ====== RESPONSIVIDADE ====== */
 /* Telas at√© 900px */
@media (max-width: 900px) {
  nav {
    flex-wrap: wrap;
    gap: 6px;
    padding: 8px;
  }
  .item img {
  max-width: 130px;
  height: 130px;
}

 /* ===== Bot√£o Voltar ao Topo ===== */
#topBtn {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: #1f2937;
  color: #fff;
  border: none;
  border-radius: 50%;
  width: 45px;
  height: 45px;
  cursor: pointer;
  box-shadow: 0 2px 8px rgba(0,0,0,.3);
  display: none;
  transition: all 0.3s ease;
  z-index: 99;
}
#topBtn:hover {
  background: #374151;
  transform: translateY(-3px);
}
 /* ===== Acessibilidade de Foco ===== */
button:focus-visible, input:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}

 #atalhosGuia {
  background: #e5e7eb;
  color: #374151;
  font-size: 0.9rem;
  text-align: center;
  padding: 6px 10px;
  border-bottom: 1px solid #d1d5db;
}
body.dark #atalhosGuia {
  background: #1f2937;
  color: #e5e7eb;
  border-color: #374151;
}
 #fontTools {
  position: absolute;
  top: 14px;
  left: 14px;
  display: flex;
  gap: 6px;
}
#fontTools button {
  background: #1f2937;
  color: #fff;
  border: 1px solid #4b5563;
  border-radius: 6px;
  padding: 3px 8px;
  font-size: 0.9rem;
  cursor: pointer;
}
#fontTools button:hover { background: #374151; }
 @media (max-width: 600px) {
  body { font-size: 15px; }
  header h1 { font-size: 1.1rem; }
  .hint { font-size: 0.85rem; }
  nav button { padding: 8px 10px; font-size: 0.85rem; }
}

.bloco, .item, .output {
  border-left: 6px solid var(--accent);
  box-shadow: var(--shadow);
}

h2 {
  color: var(--primary);
  border-bottom: 2px solid var(--accent);
}

.badge {
  background: #dcfce7;
  color: #166534;
  border: 1px solid #bbf7d0;
}

.toast.ok { background: var(--ok); }
.toast.err { background: var(--err); }
.toast.warn { background: var(--warn); }

header {
  background: linear-gradient(135deg, var(--primary), var(--accent));
  color: #ffffff;
  text-shadow: 0 1px 3px rgba(0,0,0,0.25);
  box-shadow: var(--shadow);
}

nav {
  background: var(--nav);
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 6px;
  padding: 8px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.15);
}

nav button {
  background: rgba(255,255,255,0.12);
  border: 1px solid rgba(255,255,255,0.25);
  color: #fff;
  padding: 10px 16px;
  border-radius: 10px;
  transition: all 0.25s ease;
}

nav button:hover {
  background: rgba(255,255,255,0.25);
  transform: translateY(-2px);
}

nav button.active {
  background: #ffffff;
  color: var(--primary);
  font-weight: 600;
  border-color: #e2e8f0;
}

button.action {
  background-color: var(--primary);
  color: #fff;
  border: none;
  border-radius: 10px;
  padding: 10px 16px;
  font-weight: 500;
  box-shadow: var(--shadow);
  transition: background 0.25s ease, transform 0.1s ease;
}

button.action:hover {
  background-color: var(--primary-700);
  transform: translateY(-1px);
}

.bloco {
  background: var(--card);
  border-radius: 14px;
  padding: 18px 20px;
  margin-bottom: 18px;
  box-shadow: 0 6px 16px rgba(0,0,0,0.08);
  border: 1px solid var(--border);
  transition: all 0.35s ease;
  position: relative;
  overflow: hidden;
}

/* Borda lateral com brilho din√¢mico */
.bloco::before {
  content: "";
  position: absolute;
  top: 0; left: 0;
  width: 6px;
  height: 100%;
  background: linear-gradient(180deg, var(--primary), var(--accent));
  border-radius: 6px 0 0 6px;
  transition: all 0.4s ease;
}

/* Efeito de flutua√ß√£o no hover */
.bloco:hover {
  transform: translateY(-4px);
  box-shadow: 0 10px 24px rgba(0,0,0,0.12);
}
.bloco:hover::before {
  height: 110%;
  filter: brightness(1.2);
}

/* Cores espec√≠ficas por tipo de risco */
.bloco.fisico::before {
  background: linear-gradient(180deg, #2563eb, #60a5fa); /* azul */
}
.bloco.biologico::before {
  background: linear-gradient(180deg, #16a34a, #4ade80); /* verde */
}
.bloco.quimico::before {
  background: linear-gradient(180deg, #dc2626, #f87171); /* vermelho */
}

button.action[data-copy] {
  background: var(--primary);
  color: #fff;
  border: none;
  border-radius: 8px;
  padding: 8px 14px;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  cursor: pointer;
  box-shadow: 0 4px 10px rgba(0,0,0,0.12);
  transition: all 0.25s ease;
}

button.action[data-copy]:hover {
  background: var(--primary-700);
  transform: translateY(-2px) scale(1.03);
  box-shadow: 0 6px 14px rgba(0,0,0,0.18);
}

button.action[data-copy]::before {
  content: "üìã";
  font-size: 1.1rem;
}

section.active {
  animation: fadeIn 0.6s ease both;
}
@keyframes fadeIn {
  from { opacity: 0; transform: scale(0.98); }
  to { opacity: 1; transform: scale(1); }
}

h3 {
  color: var(--primary);
  font-size: 1.05rem;
  margin-bottom: 8px;
  display: flex;
  align-items: center;
  gap: 6px;
}

p {
  line-height: 1.5;
  color: var(--fg);
  font-size: 0.95rem;
}

/* √çcones coloridos em cada tipo */
.bloco.fisico h3::before { content: "üìò"; }
.bloco.biologico h3::before { content: "üß¨"; }
.bloco.quimico h3::before { content: "üß™"; }

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.bloco {
  animation: fadeInUp 0.6s ease both;
}

/* ======== Anima√ß√µes elaboradas e em cascata ======== */

/* Fade + slide para entrada sequencial */
@keyframes fadeInCascade {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Movimento suave (respira√ß√£o leve) */
@keyframes floatCard {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
}

/* Brilho lateral animado */
@keyframes glowLine {
  0% { filter: brightness(1); }
  50% { filter: brightness(1.5); }
  100% { filter: brightness(1); }
}

/* Sombra pulsante */
@keyframes pulseShadow {
  0% { box-shadow: 0 6px 16px rgba(0,0,0,0.08); }
  50% { box-shadow: 0 8px 22px rgba(0,0,0,0.14); }
  100% { box-shadow: 0 6px 16px rgba(0,0,0,0.08); }
}

/* ======== Aplica√ß√µes ======== */

/* Posi√ß√£o inicial dos blocos */
.bloco, .item {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.6s ease, transform 0.6s ease;
}

/* Quando vis√≠vel (via JS) */
.visible {
  opacity: 1 !important;
  transform: translateY(0) !important;
  animation: fadeInCascade 0.6s ease forwards;
}

/* Cascata com delays autom√°ticos */
.visible[data-delay="1"] { animation-delay: 0.1s; }
.visible[data-delay="2"] { animation-delay: 0.2s; }
.visible[data-delay="3"] { animation-delay: 0.3s; }
.visible[data-delay="4"] { animation-delay: 0.4s; }
.visible[data-delay="5"] { animation-delay: 0.5s; }

/* Hover: respira√ß√£o e sombra */
.bloco:hover, .item:hover {
  animation: floatCard 4s ease-in-out infinite, pulseShadow 3s ease-in-out infinite;
}

/* Borda lateral animada */
.bloco::before {
  animation: glowLine 4s ease-in-out infinite;
}

header {
  position: Fixed;
  top: 0;
  z-index: 100;
}

nav {
  position: Fixed;
  top: 0; /* ser√° atualizado via JS */
  z-index: 90;
}

/* ======== AJUSTES MOBILE ======== */
@media (max-width: 768px) {

  /* üåê Layout geral */
  body {
    font-size: 15px;
    padding-top: 80px; /* evita que o header/nav cubra o conte√∫do */
  }

  header {
    font-size: 1rem;
    padding: 14px 10px;
  }

  /* üì± Navega√ß√£o (bot√µes) */
  nav {
    flex-wrap: wrap;
    justify-content: center;
    gap: 8px;
    padding: 10px;
  }

  nav button {
    flex: 1 1 45%;
    min-width: 150px;
    font-size: 0.9rem;
    padding: 10px;
    border-radius: 12px;
  }

  /* üß± Cards de EPIs */
  .grid {
    grid-template-columns: 1fr;
    gap: 20px;
  }

  .item {
    padding: 16px;
    border-radius: 14px;
    min-height: auto;
    margin: 0 8px;
  }

  .item img {
    max-width: 120px;
    height: auto;
  }

  .item h3 {
    font-size: 1rem;
    margin-bottom: 6px;
  }

  .ca-container {
    flex-direction: column;
    gap: 8px;
    margin-top: 12px;
  }

  .ca-container .badge {
    font-size: 0.85rem;
    padding: 4px 10px;
  }

  .copy-btn,
  button.action {
    padding: 8px 12px;
    font-size: 0.9rem;
    border-radius: 8px;
    width: 100%;
    box-sizing: border-box;
  }

  /* üí¨ Chat flutuante */
  #openHelpChat {
    width: 46px;
    height: 46px;
    bottom: 16px;
    right: 16px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.25);
  }

  .chat-box {
    right: 10px;
    bottom: 70px;
    width: 90vw;
    height: 400px;
  }

  /* üîù Bot√£o "Voltar ao topo" */
  #topBtn {
    bottom: 80px;
    right: 14px;
    width: 42px;
    height: 42px;
  }
}

/* ======= CORRIGE SOBREPOSI√á√ÉO DO HEADER E MENU ======= */
header {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 100;
}

nav {
  position: fixed;
  top: 60px; /* altura do header */
  left: 0;
  width: 100%;
  z-index: 99;
}

/* Compensa a altura total do header + nav */
main {
  padding-top: 130px; /* ajuste se necess√°rio */
}

/* Ajuste mobile */
@media (max-width: 768px) {
  nav {
    top: 54px; /* header menor em telas pequenas */
  }

  main {
    padding-top: 145px; /* garante espa√ßo entre nav e conte√∫do */
  }
}

/* ======== CORRIGE BARRA BRANCA NO TOPO (iOS Safari) ======== */
header {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 100;
  background: linear-gradient(135deg, var(--primary), var(--accent));
  color: #fff;
  text-shadow: 0 1px 3px rgba(0,0,0,0.25);
  box-shadow: var(--shadow);
  padding-top: env(safe-area-inset-top); /* üëà Garante cobertura total no iOS */
}

/* Ajusta o espa√ßamento do conte√∫do para compensar o header fixo */
main {
  padding-top: calc(100px + env(safe-area-inset-top)); /* ajusta dinamicamente */
}

/* Tamb√©m aplica o fundo direto ao body para evitar faixa branca residual */
body {
  background-color: var(--bg);
  background-attachment: fixed;
  background-size: 400px;
  margin: 0;
  padding-top: 0;
}

/* ======== CORRIGE SOBREPOSI√á√ÉO DO CABE√áALHO E MENU ======== */
header {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 100;
  background: linear-gradient(135deg, var(--primary), var(--accent));
  padding-top: env(safe-area-inset-top); /* cobre o topo em iPhones */
}

nav {
  position: fixed;
  top: calc(60px + env(safe-area-inset-top)); /* posiciona logo abaixo do header */
  left: 0;
  
/* ===== AJUSTE FINAL FIXO DO HEADER E MENU ===== */
header {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 1000;
  background: linear-gradient(135deg, var(--primary), var(--accent));
  padding-top: env(safe-area-inset-top);
}

nav {
  position: fixed;
  top: auto;
  left: 0;
  width: 100%;
  z-index: 999;
  background: var(--nav);
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
}

/* Remove qualquer margem fixa antiga */
main {
  margin-top: 0 !important;
  padding-top: 0 !important;
  transition: padding-top 0.2s ease;
}
    
 </style>

</header>
 <nav aria-label="Navega√ß√£o principal" id="tabs" role="tablist">
  <button aria-selected="true" class="active" onclick="mostrar('epis', this)" role="tab">üìí Cat√°logo de EPIs</button>
  <button aria-selected="false" onclick="mostrar('riscos', this, true)" role="tab">üß™ Avalia√ß√£o de Riscos</button>
  <button aria-selected="false" onclick="mostrar('empresas', this)" role="tab">üè¢ Frases com Empresa</button>
  <button aria-selected="false" onclick="mostrar('treinamento', this, true)" role="tab">üìö Plano de A√ß√£o 5W2H</button>
  <button aria-selected="false" onclick="mostrar('riscos_empresas', this, true)" role="tab">üìã Riscos por Empresa</button>
  <button aria-selected="false" onclick="mostrar('painel_tecnico', this)" role="tab">üõ† Painel T√©cnico</button>
  <button aria-selected="false" onclick="mostrar('certificados', this)" role="tab">üìÑ Gerar Certificados</button>
</nav>
<!-- Se√ß√£o: Gerar Certificados -->
<section id="certificados" aria-labelledby="tab-certificados">
  <h2>üìÑ Gerador de Certificados</h2>
  <div class="bloco" style="max-width:600px; margin:auto;">
    <p>Envie um <strong>arquivo CSV</strong> com os dados dos participantes e um ou mais <strong>modelos DOCX</strong> para gerar automaticamente os certificados.</p>
    <label style="display:block; margin-top:12px;">üìÅ Selecione o arquivo CSV:</label>
    <input type="file" id="inputCsv" accept=".csv" style="width:100%; margin-bottom:12px;">

    <label style="display:block;">üìÑ Selecione os modelos DOCX:</label>
    <input type="file" id="inputModelos" accept=".docx" multiple style="width:100%; margin-bottom:16px;">

    <button class="action exportar" onclick="enviarParaAPI()">Gerar Certificados</button>
    <p class="hint">Os certificados ser√£o processados pelo servidor e retornar√° uma confirma√ß√£o de sucesso.</p>
  </div>
</section>

 <main>
  <!-- EPIs -->
  <section id="epis" class="active" aria-labelledby="tab-epis">
    <h2>Cat√°logo de EPIs
      <span class="tools">
      </span>
    </h2>
    <div class="row">
      <input id="searchInput" type="text" placeholder="Buscar por nome, CA ou categoria..." aria-label="Buscar EPIs por nome, CA ou categoria" onkeyup="searchItems()"/>
      <select id="categoryFilter" onchange="searchItems()" aria-label="Filtrar por categoria">
        <option value="">Todas as Categorias</option>
      </select>
    <button id="clearSearch" onclick="limparBusca()" 
style="
  background: #4b5563;
  color: #f8fafc;
  font-size: 0.85rem;
  padding: 6px 14px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 6px;
  height: 36px;
  margin-left: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
  transition: all 0.2s ease;
">
  <span style="color:#f87171; font-size:0.95rem;">‚ùå</span>
  Limpar filtro
</button>
	</div>
    <div id="catalog" class="grid" aria-live="polite"></div>
    <p class="hint">Dica: clique em ‚ÄúCA N¬∫‚Äù para copiar o n√∫mero rapidamente.</p>
  </section>
   <!-- Avalia√ß√£o de Riscos -->
  <section id="riscos" aria-labelledby="tab-riscos">
    <h2>Avalia√ß√£o de Riscos
      <span class="tools">
      </span>
    </h2>
    <div class="row">
      <select id="filtro" onchange="filtrarRiscos()" aria-label="Filtro de riscos">
        <option value="todos">Todos</option>
        <option value="fisico">F√≠sicoüìò</option>
        <option value="biologico">Biol√≥gicoüß¨</option>
        <option value="quimico">Qu√≠micoüß™</option>
      </select>
    </div>
    <div id="conteudo">
      <div class="bloco fisico" data-risco="fisico">
        <h3>üìò F√çSICO - Parte 1</h3>
        <p>De acordo com a inspe√ß√£o realizada no ambiente de trabalho e atividades executadas pelo trabalhador que desempenha este cargo, e de acordo com a NR 15 da portaria 3.214/78 do M.T.E, o mesmo est√° exposto a agentes ambientais nocivos a sa√∫de ao risco F√≠sico.</p>
        <button class="action" data-copy>Copiar</button>
      </div>
      <div class="bloco fisico" data-risco="fisico">
        <h3>üìò F√çSICO - Parte 2</h3>
        <p>As atividades de trabalho realizadas neste LTCAT n√£o s√£o consideradas de Condi√ß√µes Especiais de Trabalho e, portanto, n√£o s√£o prejudiciais √† sa√∫de ou integridade f√≠sica dos trabalhadores segundo os requisitos do Decreto Federal 3048 / 1999 e seu Anexo IV.</p>
        <button class="action" data-copy>Copiar</button>
      </div>
      <div class="bloco biologico" data-risco="biologico">
        <h3>üß¨ BIOL√ìGICO - Parte 1</h3>
        <p>De acordo com a inspe√ß√£o realizada no ambiente de trabalho e atividades executadas pelo trabalhador que desempenha este cargo, e de acordo com a NR 15 da portaria 3.214/78 do M.T.E, o mesmo est√° exposto a agentes ambientais nocivos a sa√∫de ao risco Biol√≥gico.</p>
        <button class="action" data-copy>Copiar</button>
      </div>
      <div class="bloco biologico" data-risco="biologico">
        <h3>üß¨ BIOL√ìGICO - Parte 2</h3>
        <p>As atividades de trabalho realizadas neste LTCAT n√£o s√£o consideradas de Condi√ß√µes Especiais de Trabalho e, portanto, n√£o s√£o prejudiciais √† sa√∫de ou integridade f√≠sica dos trabalhadores segundo os requisitos do Decreto Federal 3048 / 1999 e seu Anexo IV.</p>
        <button class="action" data-copy>Copiar</button>
      </div>
      <div class="bloco biologico" data-risco="biologico">
        <h3>üß¨ BIOL√ìGICO - Parte 3</h3>
        <p>As atividades de trabalho realizadas neste LTCAT s√£o consideradas de Condi√ß√µes Especiais de Trabalho e, portanto, s√£o prejudiciais √† sa√∫de ou integridade f√≠sica dos trabalhadores segundo os requisitos do Decreto Federal 3048 / 1999 e seu Anexo IV.</p>
        <button class="action" data-copy>Copiar</button>
      </div>
      <div class="bloco quimico" data-risco="quimico">
        <h3>üß™ QU√çMICO - Parte 1</h3>
        <p>De acordo com a inspe√ß√£o realizada no ambiente de trabalho e atividades executadas pelo trabalhador que desempenha este cargo, e de acordo com a NR 15 da portaria 3.214/78 do M.T.E, o mesmo est√° exposto a agentes ambientais nocivos a sa√∫de ao risco Qu√≠mico.</p>
        <button class="action" data-copy>Copiar</button>
      </div>
      <div class="bloco quimico" data-risco="quimico">
        <h3>üß™ QU√çMICO - Parte 2</h3>
        <p>As atividades de trabalho realizadas neste LTCAT n√£o s√£o consideradas de Condi√ß√µes Especiais de Trabalho e, portanto, n√£o s√£o prejudiciais √† sa√∫de ou integridade f√≠sica dos trabalhadores segundo os requisitos do Decreto Federal 3048 / 1999 e seu Anexo IV.</p>
        <button class="action" data-copy>Copiar</button>
      </div>
      <div class="bloco quimico" data-risco="quimico">
        <h3>üß™ QU√çMICO - Parte 3</h3>
        <p>As atividades de trabalho realizadas neste LTCAT s√£o consideradas de Condi√ß√µes Especiais de Trabalho e, portanto, s√£o prejudiciais √† sa√∫de ou integridade f√≠sica dos trabalhadores segundo os requisitos do Decreto Federal 3048 / 1999 e seu Anexo IV.</p>
        <button class="action" data-copy>Copiar</button>
      </div>
    </div>
  </section>
   <!-- Frases com Empresa -->
  <section id="empresas" aria-labelledby="tab-empresas">
    <h2>Gerador de Frases com Empresa</h2>
    <textarea id="nomes" rows="6" placeholder="Um nome por linha"></textarea>
    <div class="row">
      <input id="empresa" type="text" placeholder="Nome da empresa"/>
      <input id="data" type="text" placeholder="Data"/>
    </div>
    <div class="row">
    <button class="action" onclick="gerarFrases()">Gerar Frases</button>
    </div>
    <div id="resultado" class="output" aria-live="polite"></div>
  </section>
   <!-- Treinamento -->
  <section id="treinamento" aria-labelledby="tab-treinamento">
    <h2>Plano de A√ß√£o 5W2H</h2>
    <div class="bloco"><h3>What (O Qu√™)</h3><p>Treinamento de NR-06</p><button class="action" data-copy>Copiar</button></div>
    <div class="bloco"><h3>Who (Quem)</h3><p>Coordenador da empresa</p><button class="action" data-copy>Copiar</button></div>
    <div class="bloco"><h3>When (Quando)</h3><p>Permanente</p><button class="action" data-copy>Copiar</button></div>
    <div class="bloco"><h3>Where (Onde)</h3><p>Ambiente laboral</p><button class="action" data-copy>Copiar</button></div>
    <div class="bloco"><h3>Why (Porqu√™)</h3><p>Conscientizar os colaboradores sobre o uso de EPI.</p><button class="action" data-copy>Copiar</button></div>
    <div class="bloco"><h3>How (Como)</h3><p>Palestra NR-06, treinamento de EPI.</p><button class="action" data-copy>Copiar</button></div>
    <div class="bloco"><h3>How much (Custo)</h3><p>***</p><button class="action" data-copy>Copiar</button></div>
  </section>
   <!-- Riscos por Empresa -->
  <section id="riscos_empresas" aria-labelledby="tab-riscos-empresas">
    <h2>Riscos por Empresa
      <span class="tools">
       </span>
    </h2>
    <input id="buscaRiscos" type="text" placeholder="Buscar risco, empresa ou setor..." onkeyup="filtrarRiscosEmpresas()"/>
    <div id="listaRiscosEmpresas"></div>
  </section>
   <!-- Painel T√©cnico + FAQ com accordion -->
  <section id="painel_tecnico">
  <h2>üìå Painel T√©cnico - Seguran√ßa do Trabalho
    <span class="tools">
 	</span>
  </h2>
   <div class="painel-grid">
    <!-- Modelos -->
    <div class="painel-card">
      <h3>üìÇ Modelos prontos de documentos</h3>
      <ul>
        <li><a href="https://drive.google.com/drive/folders/1TGYf5eNYzIcKbtL5x2BRb-pmc5VYGQQ-?usp=drive_link" target="_blank">üìÑ PPP</a></li>
        <li><a href="https://drive.google.com/drive/folders/1y0iZMFTM9yVcs771L3o6ldhY_YIcinC9?usp=drive_link" target="_blank">üìù Ordem de Servi√ßos</a></li>
        <li><a href="https://drive.google.com/drive/folders/17GqBa56ZkdBW7OTaDcfnaaSeZQyw1u0j?usp=drive_link" target="_blank">üìú Modelos Certificados</a></li>
	  </ul>
    </div>
     <!-- FAQ -->
    <div class="painel-card">
      <h3>‚ùì FAQ sobre normas e procedimentos</h3>
      <div class="accordion">
          <div class="accordion-item">
            <button class="accordion-header">Quando √© necess√°rio renovar os EPIs?</button>
            <div class="accordion-body">Sempre que o CA vencer, houver desgaste ou prazo do fabricante expirar.</div>
          </div>
          <div class="accordion-item">
            <button class="accordion-header">Qual a validade do ASO (Atestado de Sa√∫de Ocupacional)?</button>
            <div class="accordion-body">Admissional: antes da fun√ß√£o; Peri√≥dico: anual/bienal; Retorno: ap√≥s afastamento ‚â• 30 dias; Mudan√ßa de fun√ß√£o: se alterar riscos; Demissional: at√© a rescis√£o.</div>
          </div>
          <div class="accordion-item">
            <button class="accordion-header">Quem deve elaborar o PCMSO?</button>
            <div class="accordion-body">Somente M√©dico do Trabalho registrado no CRM.</div>
          </div>
          <div class="accordion-item">
            <button class="accordion-header">O que √© o PGR e quem deve elabor√°-lo?</button>
            <div class="accordion-body">Programa de Gerenciamento de Riscos elaborado por Engenheiro ou T√©cnico de Seguran√ßa do Trabalho.</div>
          </div>
          <div class="accordion-item">
            <button class="accordion-header">Qual a periodicidade do treinamento NR-06 (EPI)?</button>
            <div class="accordion-body">Na admiss√£o, mudan√ßa de fun√ß√£o, introdu√ß√£o de novos riscos e periodicamente (m√≠nimo 1 vez ao ano).</div>
          </div>
          <div class="accordion-item">
            <button class="accordion-header">O que acontece se a empresa n√£o fornecer EPIs corretamente?</button>
            <div class="accordion-body">Multas do MTE, processos trabalhistas e adicional de insalubridade/periculosidade.</div>
          </div>
          <div class="accordion-item">
            <button class="accordion-header">Quem deve pagar pelos exames m√©dicos ocupacionais?</button>
            <div class="accordion-body">A empresa √© respons√°vel por todos os custos.</div>
          </div>
          <div class="accordion-item">
            <button class="accordion-header">O que deve constar na ficha de EPI?</button>
            <div class="accordion-body">Nome, CA, data de entrega, prazo de troca, assinaturas e instru√ß√µes de uso.</div>
          </div>
        </div>
      </div>
</section>
 <!-- Chat de Ajuda (invis√≠vel at√© abrir) -->
<button id="openHelpChat" class="panel-toggle" aria-label="Abrir ajuda" style="position:fixed; right:20px; bottom:20px; z-index:100;">üí¨</button>
 <div id="chatAjuda" class="chat-box" aria-hidden="true" role="dialog" aria-label="Chat de Ajuda">
  <div id="chatMsgs" aria-live="polite"></div>
  <div style="display:flex; gap:8px; padding:8px;">
    <input id="chatInput" type="text" placeholder="Pergunte sobre EPI, NR-06, CA..." style="flex:1" />
    <button class="action" id="chatSend">Enviar</button>
  </div>
</div>
 <footer>
  <button id="topBtn" title="Voltar ao topo">‚¨ÜÔ∏è</button>
  ¬© 2025 ‚Äî Sistema T√©cnico SST ‚Ä¢ Desenvolvido por <strong>Vytor Vilar</strong><br>
  <small>Vers√£o 2.4 ‚Äî Revisado em Outubro/2025</small><br>
  <audio controls>
    <source src="Musica.mp3" type="audio/mpeg">
    Seu navegador n√£o suporta √°udio.
  </audio>
</footer>
 <!-- Modal de Senha -->
<div class="modal-backdrop" id="modalSenha" role="dialog" aria-modal="true" aria-labelledby="tituloModalSenha" aria-describedby="descModalSenha">
  <div class="modal">
    <h3 id="tituloModalSenha">Acesso restrito</h3>
    <p class="hint" id="descModalSenha">Informe a senha para acessar esta se√ß√£o protegida.</p>
    <input id="inputSenha" type="password" placeholder="Digite a senha..."/>
    <div class="modal-actions">
      <button class="action" onclick="fecharModalSenha()">Cancelar</button>
      <button class="action" onclick="confirmarSenha()">Confirmar</button>
    </div>
    <p id="erroSenha" class="hint" style="color:var(--err);margin:8px 2px 0 2px;display:none">Senha incorreta. Tente novamente.</p>
  </div>
</div>
 <!-- Toast -->
<div id="toast" class="toast" role="status" aria-live="polite"></div>
 <script>
  /* ===== Prote√ß√£o por senha nas se√ß√µes ===== */
  const senhaCorreta = atob("U0czOTM="); // "SG393" codificada em base64
  const secoesProtegidas = ["riscos", "treinamento", "riscos_empresas"];
  let secaoSolicitada = null;
   function mostrar(id, btnEl, protegido = false) {
    if (secoesProtegidas.includes(id) || protegido) {
      if (sessionStorage.getItem("sst_authed") === "true") {
        ativarSecao(id, btnEl);
        return;
      }
      secaoSolicitada = { id, btnEl };
      abrirModalSenha();
      return;
    }
    ativarSecao(id, btnEl);
  }
   function ativarSecao(id, btnEl){
    document.querySelectorAll("section").forEach(el => el.classList.remove("active"));
    document.getElementById(id).classList.add("active");
    document.querySelectorAll("nav button").forEach(b => { b.classList.remove("active"); b.setAttribute("aria-selected","false"); });
    if(btnEl){ btnEl.classList.add("active"); btnEl.setAttribute("aria-selected","true"); }
  }
   function abrirModalSenha(){
    const m = document.getElementById('modalSenha');
    document.getElementById('erroSenha').style.display = 'none';
    document.getElementById('inputSenha').value = '';
    m.style.display = 'flex';
    setTimeout(()=>document.getElementById('inputSenha').focus(), 10);
  }
  function fecharModalSenha(){
    document.getElementById('modalSenha').style.display = 'none';
    secaoSolicitada = null;
  }
  function confirmarSenha(){
    const val = document.getElementById('inputSenha').value.trim();
    if(val === senhaCorreta){
      sessionStorage.setItem("sst_authed", "true");
      mostrar(secaoSolicitada.id, secaoSolicitada.btnEl);
      fecharModalSenha();
      showToast("Acesso liberado.", "ok");
    }else{
      document.getElementById('erroSenha').style.display = 'block';
      showToast("Senha incorreta.", "err");
    }
  }
  document.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && document.getElementById('modalSenha').style.display==='flex'){ fecharModalSenha(); } });
   /* ===== Utilit√°rio de c√≥pia com Toast ===== */
  async function copiarTexto(texto) {
    try {
      await navigator.clipboard.writeText(texto);
      showToast("Copiado!", "ok");
    } catch (e) {
      const ta = document.createElement('textarea');
      ta.value = texto;
      document.body.appendChild(ta);
      ta.select();
      document.execCommand('copy');
      document.body.removeChild(ta);
      showToast("Copiado!", "ok");
    }
  }
  document.addEventListener('click', (ev)=>{
    const btn = ev.target.closest('button[data-copy]');
    if(btn){
      const p = btn.previousElementSibling;
      if(p) copiarTexto(p.innerText);
    }
  });
   /* ===== Toast ===== */
  function showToast(msg, kind){
    const t = document.getElementById('toast');
    t.textContent = msg;
    t.className = 'toast show' + (kind ? ' ' + (kind==='ok' ? 'ok' : kind==='err' ? 'err' : '') : '');
    setTimeout(()=>{ t.classList.remove('show'); }, 1800);
  }
   // üîë Permitir login com Enter no campo de senha
  document.getElementById("inputSenha").addEventListener("keydown", function (e) {
    if (e.key === "Enter") {
      e.preventDefault();
      confirmarSenha();
    }
  });
   /* -------- EPIs (lista do arquivo 2 - amostra) -------- */
  const epis = [
    { categoria: "ü•æ Cal√ßados", nome: "Botina de El√°stico com Bico de PVC - Fujiwara", ca: "48.413", imagem: "https://d3bhvz7al37iy6.cloudfront.net/Custom/Content/Products/10/68/1068213_bota-seguranca-bracol-microfibra-composite-eletricista-38530_z2_638430758882818688.webp" },
    { categoria: "ü•æ Cal√ßados", nome: "Bota de Seguran√ßa ComBico de PVC ModeloLeve e Muito Conforto", ca: "45.258", imagem: "https://d3bhvz7al37iy6.cloudfront.net/Custom/Content/Products/10/68/1068213_bota-seguranca-bracol-microfibra-composite-eletricista-38530_z2_638430758882818688.webp" },
    { categoria: "ü•æ Cal√ßados", nome: "Sapato de Amarrar em Couro com Palmilha - Fujiwara (Branco/Preto)", ca: "41.858", imagem: "https://images.tcdn.com.br/img/img_prod/1033319/sapato_de_amarrar_fujiwara_linha_usafe_em_couro_com_palmilha_ca_41858_4098usas4600us_171_1_370dd8cc6d1594636c42615405c0579d.jpg" },
    { categoria: "ü•æ Cal√ßados", nome: "Sapato Antiderrapante Imperme√°vel - Steelflex", ca: "38.590", imagem: "https://btequipamentos.agilecdn.com.br/111067_1_1.jpg?v=220-858371529" },
    { categoria: "ü•æ Cal√ßados", nome: "Bota de PVC Meio Cano (Branco/Preto) - Bracol", ca: "37.456", imagem: "https://lojaagrometal.fbitsstatic.net/img/p/bota-pvc-preto-cano-medio-39-com-forro-ca-36-025-innpro-73005/259515.jpg?w=1000&h=1000&v=no-change&qs=ignore" },
    { categoria: "ü•æ Cal√ßados", nome: "Bota de Seguranca em couro Nobuck com cadar√ßo Dubai Eletrista bico PVC- Bracol", ca: "48.383", imagem: "https://http2.mlstatic.com/D_NQ_NP_761173-MLB89078178731_072025-O-bota-botina-de-seguranca-coturno-nobuck-marluvas-epi-com-ca.webp" },
    { categoria: "ü•æ Cal√ßados", nome: "Bota de Seguran√ßa Bicode Composite NR10Eletricista - Bracol", ca: "38.530", imagem: "https://imgs.search.brave.com/esoJvDJc19lu3PTbzs5h7fqKk5SlIa6SfFq74C2gxaw/rs:fit:500:0:1:0/g:ce/aHR0cHM6Ly9odHRw/Mi5tbHN0YXRpYy5j/b20vRF9RX05QXzJY/XzY0MDA1OS1NTEI4/MDQ0NDk1MTk1MV8x/MTIwMjQtRS1ib3Rh/LWJvdGluYS1zZWd1/cmFuY2EtYnJhY29s/LWVsZXRyaWNpc3Rh/LW5yMTAtYmljby1j/b21wb3NpdGUud2Vi/cA" },
	{ categoria: "üß§ Luvas", nome: "Luva de Algod√£o Tricotada Mesclada - Volk", ca: "25.773", imagem: "https://i.imgur.com/xN1BFLa.png" },
    { categoria: "üß§ Luvas", nome: "Luva de Malha Neotato PU Preta - Volk", ca: "30.916", imagem: "https://i.imgur.com/c9CLP9E.png" },
    { categoria: "üß§ Luvas", nome: "Luva de L√°tex Multiuso para Uso Qu√≠mico/Biol√≥gico (Amarela/Azul) - Danny", ca: "39.564", imagem: "https://i.imgur.com/hsiXIQa.png" },
    { categoria: "üß§ Luvas", nome: "Luva Pegasus PRO Coleta de Lixo e Servi√ßos Gerais Bicolor - Volk", ca: "28.709", imagem: "https://i.imgur.com/BAbfvB6.png" },
    { categoria: "üß§ Luvas", nome: "Luva de L√°tex Neoprene - Volk", ca: "37.900", imagem: "https://i.imgur.com/y79Qsop.png" },
    { categoria: "üß§ Luvas", nome: "Luva Nitr√≠lica Verde para Uso Qu√≠mico/Biol√≥gico 35cm - Delta Plus", ca: "42.938", imagem: "https://i.imgur.com/qDHZ4XW.png" },
    { categoria: "üß§ Luvas", nome: "Luva PVC Forrada Cano Longo Palma √Åspera - Danny", ca: "37.559", imagem: "https://i.imgur.com/6ML7rLO.png" },
    { categoria: "üß§ Luvas", nome: "Luva Malha de A√ßo - Danny", ca: "6.257", imagem: "https://i.imgur.com/nWzDsXA.png" },
    { categoria: "üß§ Luvas", nome: "Luva de Vaqueta Petroleira Crua - Protcap", ca: "15.061", imagem: "https://i.imgur.com/iX5fA0r.png" },
    { categoria: "üß§ Luvas", nome: "Luva Coral Resist√™ncia a Cortes e Furos at√© 350¬∫ - Danny", ca: "15.366", imagem: "https://i.imgur.com/be6AUx2.png" },
    { categoria: "üß§ Luvas", nome: "Luva de Seguran√ßa Confort T√©rmica L√°tex com Forro para Limpeza - Danny", ca: "15.532", imagem: "https://i.imgur.com/eSHbHzh.png" },
    { categoria: "üß§ Luvas", nome: "Luva de L√°tex Cano Longo Longatex - Danny", ca: "9.567", imagem: "https://i.imgur.com/bTvGvC9.png" },
    { categoria: "üß§ Luvas", nome: "Luva Resistente ao Corte N√≠vel 5 Cut Smart - Volk", ca: "47.068", imagem: "https://i.imgur.com/ZlWIPQb.png" },
    { categoria: "üß§ Luvas", nome: "Luva Hand N√≠trilo Lona - Handex", ca: "44.524", imagem: "https://i.imgur.com/fcOGOPT.png" },
    { categoria: "üß§ Luvas", nome: "Luva Hand Oil Cut - Handex", ca: "39.416", imagem: "https://i.imgur.com/50GGoXw.png" },
    { categoria: "üß§ Luvas", nome: "Luva De Raspa", ca: "10.074", imagem: "https://imgs.search.brave.com/7DZ1k3hMEXbJdMexzAI0qt_s1V3pFI5BXoPgs4MqbXE/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9pbWFn/ZXMudGNkbi5jb20u/YnIvaW1nL2ltZ19w/cm9kLzEyNjI0NzEv/bHV2YV9taXN0YV9k/ZV92YXF1ZXRhX3Jh/c3BhX2Nhbm9fbG9u/Z29fcF8yMF9jbXNf/Y19hXzQwMzE5XzI4/MTVfMV9lNzVmMzM2/ZWU5NjY4NjQ3ZDUz/YzY1N2VlNzhiNGZj/NC5qcGc" },
	{ categoria: "ü¶æ Mangotes", nome: "Mangote Anti-Corte e T√©rmico 45cm - Delta Plus", ca: "41.361", imagem: "https://www.americanvek.com.br/cdn/shop/files/mangote-de-protecao-40cm-anticorte-nivel-5-com-fio-de-aco-seiki-ca39062-peca-1172807310_500x246.jpg?v=1749676771" },
    { categoria: "ü¶æ Mangotes", nome: "Mangote de Raspa Soldador com El√°sticos 40cm - Zanel", ca: "16.073", imagem: "https://www.ferpam.com.br/media/mf_webp/jpg/media/catalog/product/cache/7f3660905effcfdd27a3ab16f16ab037/t/_/t_redu_o_13_-compressed.webp" },
    { categoria: "ü¶∫ Aventais", nome: "Avental de Raspa 120x60cm sem Emendas - Zanel", ca: "13.989", imagem: "https://imgs.search.brave.com/0Zf1kLnKjFiMTVXbOqNhkYkugcJFzkH7wcKaLdcJIxg/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9kM2Jo/dno3YWwzN2l5Ni5j/bG91ZGZyb250Lm5l/dC9DdXN0b20vQ29u/dGVudC9Qcm9kdWN0/cy8xMC82Ni8xMDY2/OTUzX2F2ZW50YWwt/ZW0tcmFzcGEtMTIw/eDcwLWNtLXphbmVs/LWF2LTEyMDcwc2Ut/c2VtLWVtZW5kYXMt/Y29tLXRpcmFzLWVt/LXJhc3BhLWUtZml2/ZWxhcy1tZXRhbGlj/YXMtY2EtMTM5ODlf/bDFfNjM4MjEyMzc3/NTY1MjE0NzUyLndl/YnA" },
    { categoria: "ü¶∫ Aventais", nome: "Avental de PVC Branco - Maicol", ca: "37.729", imagem: "https://imgs.search.brave.com/Tl0cjZhWvJU0qdYADZvGZzDa4lv8fAXe1oUrvqYtL-Y/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly93d3cu/YXN0cm9kaXN0cmli/dWlkb3JhLmNvbS9t/ZWRpYS90bXAvd2Vi/cC9jYXRhbG9nL3By/b2R1Y3QvY2FjaGUv/MS9pbWFnZS82MDB4/LzlkZjc4ZWFiMzM1/MjVkMDhkNmU1ZmI4/ZDI3MTM2ZTk1L2Ev/di9hdmVudGFsX2Rl/X3B2Y19jb21fZm9y/cm9fMV8xNV94XzBf/NjVfY21fYnJhbmNv/XzBfMzBfbW1fLV9t/YWljb2xfY2FfLV8z/NzcyOV80XzIud2Vi/cA" },
    { categoria: "ü¶∫ Aventais", nome: "Avental De Prote√ß√£o De PVC Cores Balask - Branco", ca: "6.429", imagem: "https://http2.mlstatic.com/D_NQ_NP_786060-MLU76630545889_052024-O.webp" },
    { categoria: "ü¶∫ Aventais", nome: "Avental De Prote√ß√£o De PVC Cores Balask - Preto", ca: "6.429", imagem: "https://http2.mlstatic.com/D_NQ_NP_729531-MLU72636555305_112023-O.webp" },
    { categoria: "ü¶∫ Aventais", nome: "Avental de Vinil Transparente Tira Soldada", ca: "38.316", imagem: "https://d3bhvz7al37iy6.cloudfront.net/Custom/Content/Products/10/51/1051169_avental-de-vinil-transparente-tira-soldada-ca-37475_z1_638821262518773542.webp" },
    { categoria: "üò∑ M√°scaras", nome: "M√°scara PFF1 com ProSafety - Delta Plus", ca: "38.501", imagem: "https://imgs.search.brave.com/DxGkuYzi-TIuHYfvbCkTB8x9QKqlQhpQQ-y0PQ0o2kk/rs:fit:500:0:1:0/g:ce/aHR0cHM6Ly9kM2Jo/dno3YWwzN2l5Ni5j/bG91ZGZyb250Lm5l/dC9DdXN0b20vQ29u/dGVudC9Qcm9kdWN0/cy8xMC80OC8xMDQ4/OTA2X21hc2NhcmEt/cGZmMS1jb20tdmFs/dnVsYS1wcm8tYWdy/by1kZWx0YS1wbHVz/LWNhaXhhLWNvbS0x/MDBfbTlfNjM3MzU5/NjY3MzQyNzE0NjUz/LndlYnA" },
    { categoria: "üò∑ M√°scaras", nome: "M√°scara N95 PF2 - Nutriex Safety", ca: "46.868", imagem: "https://imgs.search.brave.com/rVZe6d37VK0knK_LSb7UFBTtuzXH6Qqo2R5MgyT5oaw/rs:fit:500:0:1:0/g:ce/aHR0cHM6Ly9odHRw/Mi5tbHN0YXRpYy5j/b20vRF9OUV9OUF84/NDk5NDctTUxCNTI0/NzgxMjI3OTNfMTEy/MDIyLVYud2VicA" },
    { categoria: "üò∑ M√°scaras", nome: "M√°scara PFF2 - Delta Plus", ca: "38.503", imagem: "https://imgs.search.brave.com/ArpzaLtlElyrzt2dTe03WbqKAxJPbC_SIKyTP1WDyE0/rs:fit:500:0:1:0/g:ce/aHR0cHM6Ly9jZG4u/bGVyb3ltZXJsaW4u/Y29tLmJyL3Byb2R1/Y3RzL21hc2NhcmFf/ZGVzY2FydGF2ZWxf/cGZmMl9zX19jX192/YWx2dWxhX19kZWx0/YV9wbHVzXzkwNTk5/NTIzX2IwZjVfNjAw/eDYwMC5qcGc" },
    { categoria: "üìå Epis", nome: "Creme Protetor Luva Quimica 3em1 - Nutriex", ca: "43.802", imagem: "https://www.astrodistribuidora.com/media/tmp/webp/catalog/product/cache/1/image/600x/9df78eab33525d08d6e5fb8d27136e95/s/a/sabonete_desengraxante_esfoliante_limpa_m_os_biodegrad_vel_fast_orange_bombona_4l_-_luvex_img_1_1__png.webp" },
    { categoria: "üìå Epis", nome: "Cinturao de Seguran√ßa Steelflex com 1 ponto CQCT1111 + Talabarte Duplo em Y Com Fita Tubular", ca: "45.069", imagem:"https://d3bhvz7al37iy6.cloudfront.net/Custom/Content/Products/10/53/1053591_cinturao-de-seguranca-steelflex-com-1-ponto-cqct1111-talabarte-duplo-em-y-com-fita-tubular-_m3_637826022890604517.webp" },
    { categoria: "üìå Epis", nome: "Macac√£o de Seguranca Branco - SteelFlex", ca: "39.707", imagem: "https://d3bhvz7al37iy6.cloudfront.net/Custom/Content/Products/10/48/1048195_macacao-de-seguranca-steelflex-branco-ca-39707_m3_637358851517696820.webp" },
    { categoria: "üìå Epis", nome: "Luva Vinil Sem P√≥ Descartavel c/100 - Descarpack", ca: "44.050", imagem: "https://loja.descarpack.com.br/media/catalog/product/l/u/luva-vinil-procedimento-nao-cirurgico-sem-po-p-descarpack-0541101-1-para-que-indicado_2.jpg?auto=webp&format=pjpg&width=1600&height=2000&fit=cover" },
    { categoria: "üìå Epis", nome: "Mascara De Solda", ca: "14.199", imagem:"https://imgs.search.brave.com/6o8YB6x03WKJrBtO2_BuSUmWMVKMKN9z0SuQb3nWjkQ/rs:fit:500:0:1:0/g:ce/aHR0cHM6Ly9hYnJh/ZmVyLmFnaWxlY2Ru/LmNvbS5ici8xMDY1/N190aHVtYl8xLmpw/Zz92PTI5NS0yMDE4/OTAwNzM5" },
	{ categoria: "üß• Vestu√°rio T√©rmico", nome: "Japona T√©rmica Frigor√≠fica Azul Marinho - Maicol", ca: "10.975", imagem: "https://safetytrab.com.br/wp-content/uploads/2018/04/Japona-Termica-Camara-Fria-Baixa-Temperatura-Maicol-CA-10975.jpg.webp" },
    { categoria: "üß• Vestu√°rio T√©rmico", nome: "Cal√ßa De Nylon T√©rmica Imperme√°vel Para C√¢mara Fria - Maicol", ca: "10.976", imagem: "https://http2.mlstatic.com/D_NQ_NP_2X_948835-MLB78618348261_082024-F.webp" },
    { categoria: "üß• Vestu√°rio T√©rmico", nome: "Capuz Balaclava T√©rmico para C√¢mara Fria Suedine - Maicol", ca: "10.979", imagem: "https://images.tcdn.com.br/img/img_prod/626581/capuz_balaclava_suedine_maicol_1063_variacao_6239_1_af993d65a8dc368e7488518fa0726ba8.png" },
    { categoria: "üß• Vestu√°rio T√©rmico", nome: "Mei√£o T√©rmico - Maicol", ca: "10.977", imagem: "https://safetytrab.com.br/wp-content/uploads/2018/04/Mei%C3%A3o-T%C3%A9rmico-para-C%C3%A2mara-Fria-Maicol.jpg.webp" },
    { categoria: "üß• Vestu√°rio T√©rmico", nome: "Luva T√©rmica Frigor√≠fica em Nylon Baixa Temperatura -35¬∫ - Maicol", ca: "10.978", imagem: "https://safetytrab.com.br/wp-content/uploads/2018/04/Luva-de-Seguran%C3%A7a-T%C3%A9rmica-em-Nylon-Maicol-CA-10.978.jpg.webp" },
	{ categoria: "üß• Vestu√°rio T√©rmico", nome: "Bota T√©rmica", ca: "42.632", imagem: "https://imgs.search.brave.com/7OIbzTUng5IX3dKP7w3I89Qba4cqHmwbnv9T__waCxU/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9kMXFs/MGEzZTNqOW1jeC5j/bG91ZGZyb250Lm5l/dC9DdXN0b20vQ29u/dGVudC9Qcm9kdWN0/cy84Ni84MS84Njgx/X2JvdGEtZnJpZ29y/aWZpY2EtYnJhbmNh/LWN1cnRhLWJyYWNv/bC00MDEwYmRnbTQ2/MDBfczNfNjM4Nzk5/ODgxNDYwMDYzNjcw/LndlYnA" },
	{ categoria: "üë∑‚Äç Vestu√°rio", nome: "Camisa Com Refletivo Para Eletricista Cinza - Maicol", ca: "44.108", imagem: "https://d1ql0a3e3j9mcx.cloudfront.net/Custom/Content/Products/57/86/5786_camisa-eletricista-nr10-cinza-com-refletivo-maicol_l1_637934046958088869.webp" },
    { categoria: "üë∑‚Äç Vestu√°rio", nome: "Cal√ßa Classe 2 Cinza Com Refletivo - Maicol", ca: "44.109", imagem: "https://d1ql0a3e3j9mcx.cloudfront.net/Custom/Content/Products/58/38/5838_calca-eletricista-nr10-com-refletivo-maicol_z1_637934927655407307.webp" },
    { categoria: "üë∑‚Äç Vestu√°rio", nome: "Blus√£o PVC Forrado Com Capuz", ca: "29.790", imagem: "https://www.ledan.com.br/slideWF/images/calca-e-blusao-pvc-forrado/calca-e-blusao-pvc-forrado1.jpg" },
    { categoria: "üë∑‚Äç Vestu√°rio", nome: "Cal√ßa De Chuva Em PVC Forrada Amarela", ca: "37.536", imagem: "https://d3bhvz7al37iy6.cloudfront.net/Custom/Content/Products/10/46/1046987_calca-de-chuva-em-pvc-forrada-amarela-ca-28191-_z4_637669591007837495.webp" },
    { categoria: "ü¶∫ Colete", nome: "Colete Tipo X Laranja Steelflex", ca: "38.175", imagem: "https://www.steelflex.pro/wp-content/uploads/2021/08/COLETE-REFLETIVO-X1.png" },
    { categoria: "ü¶∫ Colete", nome: "Colete SteelFlex Refletivo Laranja Fluorescente", ca: "42.716", imagem: "https://www.steelflex.pro/wp-content/uploads/2021/08/colete-refletivo-4-bolsos-laranja.png" },
    { categoria: "üõ° Prote√ß√£o Facial", nome: "Protetor Facial Jabre Carneira Hipoalerg√™nica com Regulagem por Catraca Tamanho 8 - Delta Plus", ca: "47.620", imagem: "https://images.tcdn.com.br/img/img_prod/1033319/protetor_facial_jabre_8_delta_plus_ca_47620_1699_1_04f95abaf05adc053f1561dba26a2d78.jpg" },
    { categoria: "üõ° Prote√ß√£o Facial", nome: "Protetor Facial com Carneira Hipoalerg√™nica com regulagem e f√°cil ajuste - Delta Plus", ca: "10.975", imagem: "https://d3bhvz7al37iy6.cloudfront.net/Custom/Content/Products/10/67/1067058_protetor-facial-jabre-delta-plus-carneira-hipoalergenica-com-regulagem-ajuste-facil-tamanho-8-ca-47620_z1_638227684320944177.webp" },
    { categoria: "üõ° Prote√ß√£o Facial", nome: "Protetor Facial Telado Dystray - Ideal Para Ro√ßadeira", ca: "36.802", imagem: "https://elastobor.vtexassets.com/arquivos/ids/213582/PROTETOR-F%EF%BF%BDCIL-DYSTRAY-TELADO-COM-CATRACA.jpg?v=637557443744600000" },
    { categoria: "üëì √ìculos", nome: "√ìculos de Seguran√ßa Ampla Vis√£o - Galeras Clear", ca: "35.268", imagem: "https://hiperfer.cdn.magazord.com.br/img/2023/07/produto/13687/14734-1-oculos-de-seguranca-com-ampla-visao-galeras-clear-deltaplus.jpg?ims=500x500" },
    { categoria: "üëì √ìculos", nome: "√ìculos Prote√ß√£o Sobrepor Antirrisco Hekla Incolor - Delta Plus", ca: "38.253", imagem: "https://ccp.vteximg.com.br/arquivos/ids/240080-535-535/oculos-de-proteco-delta-plus-hekla-clear-ca-38253-D_NQ_NP_873213-MLB26641061700_012018-F.jpg?v=636843803319300000" },
    { categoria: "üëì √ìculos", nome: "√ìculos de Seguran√ßa tipo RJ Vvision 100 incolor - Volk", ca: "42.716", imagem: "https://volkdobrasil.com.br/wp-content/uploads/2024/08/oculos-vvision100-incolor-600x600.jpg" },
    { categoria: "üéß Prote√ß√£o Auditiva", nome: "Abafador de Ru√≠do Combat 10DB - Maicol", ca: "10.977", imagem: "https://images.tcdn.com.br/img/img_prod/860085/abafador_concha_combat_10db_prosafety_ca_19405_175_1_20201214023621.jpg" },
    { categoria: "üéß Prote√ß√£o Auditiva", nome: "Abafador de Ru√≠do SoftSlim 18DB - Camper", ca: "33.135", imagem: "https://images.tcdn.com.br/img/img_prod/652260/abafador_de_ruido_18_db_soft_slim_cod_800200_camper_5653_1_829cc44eecca796fb5e0ca7592040551_20230823104822.jpg" },
    { categoria: "üéß Prote√ß√£o Auditiva", nome: "Abafador de Ru√≠do ConfortPlus 26DB - Camper", ca: "48.054", imagem: "https://images.tcdn.com.br/img/img_prod/652260/abafador_de_ruidos_26_db_confort_plus_camper_4258_1_29963934d741bf4bf802579cf35404ff_20230823104818.jpg" },
    { categoria: "üéß Prote√ß√£o Auditiva", nome: "Abafador de Ru√≠do Combat 10DB - Delta Plus", ca: "19.405", imagem: "https://cdn.leroymerlin.com.br/products/abafador_de_ruido_combat_delta_plus_90599383_893d_600x600.jpeg" },
    { categoria: "üéß Prote√ß√£o Auditiva", nome: "Abafador Concha Interlagos 23DB - Delta Plus", ca: "35.003", imagem: "https://d3bhvz7al37iy6.cloudfront.net/Custom/Content/Products/10/51/1051099_abafador-concha-interlagos-cz-delta-plus-intergr-ca-35003_z27_638303840084340681.webp" }
  ];
  const catalog = document.getElementById('catalog');
  const categoryFilter = document.getElementById('categoryFilter');
  function renderCatalog(list) {
    catalog.innerHTML = list.map((epi, idx) => `
      <div class="item" role="article" aria-labelledby="epi-${idx}-title">
        <img src="${epi.imagem}" alt="${epi.nome}" loading="lazy" />
        <div class="muted">${epi.categoria}</div>
        <h3 id="epi-${idx}-title">${epi.nome}</h3>
        <p class="muted"><span class="badge" title="Certificado de Aprova√ß√£o">CA N¬∫: <strong>${epi.ca}</strong></span></p>
        <button class="action" onclick="copiarTexto('${epi.ca.replace(/'/g, "\'")}')">Copiar CA</button>
      </div>`).join('');
  }
  function populateCategoryFilter() {
    const categories = [...new Set(epis.map(e => e.categoria))].sort((a,b)=>a.localeCompare(b));
    categories.forEach(cat => {
      const option = document.createElement('option');
      option.value = cat; option.textContent = cat;
      categoryFilter.appendChild(option);
    });
  }
  function searchItems() {
    const query = document.getElementById('searchInput').value.toLowerCase().trim();
    const selectedCategory = categoryFilter.value;
    const filtered = epis.filter(e =>
      (e.nome.toLowerCase().includes(query) || e.ca.includes(query) || e.categoria.toLowerCase().includes(query)) &&
      (selectedCategory === '' || e.categoria === selectedCategory)
    );
    renderCatalog(filtered);
  }
  populateCategoryFilter();
  renderCatalog(epis);
  
function limparBusca(){
  document.getElementById("searchInput").value = "";
  document.getElementById("categoryFilter").value = "";
  searchItems();
  showToast("Filtros limpos!", "ok");
}   
   /* -------- Filtro Avalia√ß√£o de Riscos -------- */
  function filtrarRiscos() {
    const filtro = document.getElementById("filtro").value;
    document.querySelectorAll("#riscos .bloco").forEach(bloco => {
      const tipo = bloco.getAttribute("data-risco");
      bloco.style.display = (filtro === "todos" || filtro === tipo) ? "block" : "none";
    });
  }
   /* -------- Frases por Empresa -------- */
  function gerarFrases() {
    const nomes = document.getElementById("nomes").value.trim().split("\n").filter(Boolean);
    const empresa = document.getElementById("empresa").value.trim();
    const data = document.getElementById("data").value.trim();
    const saida = nomes.map(nome => `${nome}, ${empresa}, , , ${data}`).join("\n");
    document.getElementById("resultado").innerText = saida || "‚Äî";
    showToast("Frases geradas.", "ok");
  }
  function exportFrasesTXT(){
    const conteudo = document.getElementById("resultado").innerText || "";
    const blob = new Blob([conteudo], { type: "text/plain;charset=utf-8" });
    const url = URL.createObjectURL(blob);
    const a = Object.assign(document.createElement('a'), { href:url, download:'frases_empresa.txt' });
    document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
  }
   /* -------- Riscos por Empresa (amostra) -------- */
  const riscosEmpresas = [
    { emoji:"üîä", risco:"RU√çDO", empresa:"FAP IND√öSTRIA E COM√âRCIO DE ACR√çLICOS LTDA", setor:"Dobra" },
    { emoji:"üå´", risco:"POEIRA", empresa:"FAP IND√öSTRIA E COM√âRCIO DE ACR√çLICOS LTDA", setor:"Polimento" },
    { emoji:"üõ†", risco:"FERRAMENTAS MANUAIS/M√ÅQUINAS E EQUIPAMENTOS", empresa:"FAP IND√öSTRIA E COM√âRCIO DE ACR√çLICOS LTDA", setor:"Produ√ß√£o" },
    { emoji:"üßº", risco:"PRODUTOS DOMISSANIT√ÅRIOS DE LIMPEZA", empresa:"FAP IND√öSTRIA E COM√âRCIO DE ACR√çLICOS LTDA", setor:"Limpeza" },
    { emoji:"üë∑‚Äç‚ôÇÔ∏è", risco:"TRABALHO EM ALTURA", empresa:"JF CONSTRUCAO E PAVIMENTA√á√ÉO LTDA", setor:"Obra" },
    { emoji:"üß∫", risco:"TINTAS/DILUENTES", empresa:"PREST-MAC COMERCIAL E INDUSTRIAL LTDA", setor:"Pintura" },
    { emoji:"‚ö°", risco:"TRABALHO COM ELETRICIDADE", empresa:"WGL SOLU√á√ïES EM TECNOLOGIAS E SERVI√áOS LTDA", setor:"Manuten√ß√£o/El√©trica (Preventiva/Corretiva)" },
    { emoji:"üß¥", risco:"LUBRIFICANTES", empresa:"PREST-MAC COMERCIAL E INDUSTRIAL LTDA", setor:"Produ√ß√£o" },
    { emoji:"‚ú®", risco:"PRODUTOS QU√çMICOS DE EST√âTICA", empresa:"ELENICE GERALDO DOS SANTOS CABELEIREIROS LTDA", setor:"Sal√£o" },
    { emoji:"üçî", risco:"MANIPULA√á√ÉO DE ALIMENTOS", empresa:"P√ÉES E DOCES CHAL√â DOCILE LTDA", setor:"Cozinha" },
    { emoji:"üöó", risco:"CONDU√á√ÉO DE VE√çCULOS AUTOMOTORES", empresa:"POLICOMP COMERCIO DE COMPONENTES", setor:"Estoque/Transporte" },
    { emoji:"üî©", risco:"FUMOS MET√ÅLICOS DE ESTANHO", empresa:"POLICOMP COMERCIO DE COMPONENTES", setor:"T√©cnico" },
    { emoji:"üí•", risco:"RADIA√á√ÉO N√ÉO IONIZANTE", empresa:"SPADA MIDIA E EVENTOS LTDA", setor:"Obra/Serralheria" },
    { emoji:"üò∏üê∂", risco:"PRODUTOS QU√çMICOS DE BELEZA PARA C√ÉES E GATOS", empresa:"CAROL PET SHOP COMERCIO DE RACOES ACESSORIOS BANHO E TOSA LTDA", setor:"Banho e Tosa" },
    { emoji:"üì¶", risco:"TRABALHOS DE SEPARA√á√ÉO DE EMBALAGENS", empresa:"MONTE VIRGINNE COM√âRCIO DE SUCATAS DE PL√ÅSTICOS LTDA ME", setor:"Produ√ß√£o/Separa√ß√£o" },
    { emoji:"‚ùÑ", risco:"FRIO", empresa:"LANCHONETE E ESFIHARIA NOVA ALIANCA LTDA", setor:"Cozinha" },
    { emoji:"üß¥", risco:"√ìLEO SINT√âTICO", empresa:"DELTA ROTULADORAS EIRELI", setor:"F√°brica" },
    { emoji:"üóú", risco:"ESTANHO", empresa:"RAUL SANTOS FERREIRA", setor:"Produ√ß√£o" },
	{ emoji:"ü©π", risco:"ACIDENTES", empresa:"RIO BONITO COMERCIO E SERVICOS PARA PISCINAS LTDA", setor:"Assistencia" },
	{ emoji:"‚öïÔ∏è", risco:"VIRUS E BACT√âRIAS", empresa:"RIO BONITO COMERCIO E SERVICOS PARA PISCINAS LTDA", setor:"Externo" },
	{ emoji:"üí¶", risco:"CLORO", empresa:"RIO BONITO COMERCIO E SERVICOS PARA PISCINAS LTDA", setor:"Externo" },
  ];
  function renderRiscosEmpresas(list) {
    const container = document.getElementById("listaRiscosEmpresas");
    container.innerHTML = list.map(item => {
      const textoCopiar = `${item.empresa}`.replace(/"/g, '&quot;');
      return `
        <div class="bloco">
          <p><strong>${item.emoji} ${item.risco}</strong><br>
          <small class="muted">${item.empresa} ‚Äì Setor ${item.setor}</small></p>
          <div class="row">
            <button class="action" onclick="copiarTexto('${textoCopiar}')">Copiar</button>
          </div>
        </div>`;
    }).join('');
  }
  function filtrarRiscosEmpresas() {
    const termo = document.getElementById("buscaRiscos").value.toLowerCase();
    const filtrados = riscosEmpresas.filter(i =>
      (i.risco + ' ' + i.empresa + ' ' + i.setor).toLowerCase().includes(termo)
    );
    renderRiscosEmpresas(filtrados);
  }
  renderRiscosEmpresas(riscosEmpresas);
 // ===== Bot√£o Voltar ao Topo =====
window.onscroll = function() {
  document.getElementById("topBtn").style.display =
    window.scrollY > 200 ? "block" : "none";
};
document.getElementById("topBtn").onclick = () =>
  window.scrollTo({ top: 0, behavior: "smooth" }); 
   /* ===== Accordion toggle ===== */
  document.addEventListener('click', (e)=>{
    const header = e.target.closest('.accordion-header');
    if(!header) return;
    const item = header.parentElement;
    item.classList.toggle('active');
  });
 //* ====== CHAT DE AJUDA INTELIGENTE LOCAL - SST ====== */
const chatBox = document.getElementById("chatAjuda");
const chatButton = document.getElementById("openHelpChat");
const chatMsgs = document.getElementById("chatMsgs");
const chatInput = document.getElementById("chatInput");
const chatSend = document.getElementById("chatSend");
 // Exibe / esconde o chat
chatButton.addEventListener("click", () => {
  chatBox.classList.toggle("active");
  if (chatBox.classList.contains("active")) {
    chatInput.focus();
  }
});
 // Envio de mensagens
chatSend.addEventListener("click", enviarMensagem);
chatInput.addEventListener("keydown", (e) => {
  if (e.key === "Enter") {
    e.preventDefault();
    enviarMensagem();
  }
});
 function enviarMensagem() {
  const msg = chatInput.value.trim();
  if (!msg) return;
  adicionarMensagem("user", msg);
  chatInput.value = "";
  setTimeout(() => {
    const resposta = responderPergunta(msg);
    adicionarMensagem("bot", resposta);
  }, 500);
}
 function adicionarMensagem(tipo, texto) {
  const div = document.createElement("div");
  div.classList.add("chat-msg", tipo);
  div.innerHTML = `<div class="bubble">${texto}</div>`;
  chatMsgs.appendChild(div);
  chatMsgs.scrollTop = chatMsgs.scrollHeight;
}
 /* ====== ‚ÄúMini GPT‚Äù local com conhecimento t√©cnico de SST ====== */
function responderPergunta(msg) {
  msg = msg.toLowerCase();
}
 function ativarSecao(id, btnEl){
  document.querySelectorAll("section").forEach(el => {
    el.classList.remove("active");
  });
  const target = document.getElementById(id);
  if (target) {
    target.classList.add("active", "fade-in");
  }
  document.querySelectorAll("nav button").forEach(b => {
    b.classList.remove("active");
    b.setAttribute("aria-selected","false");
  });
  if(btnEl){
    btnEl.classList.add("active");
    btnEl.setAttribute("aria-selected","true");
  }
}
 const OPENAI_API_KEY = "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"; // substitua pela sua chave real
 document.getElementById("chatSend").addEventListener("click", enviarMensagem);
document.getElementById("chatInput").addEventListener("keydown", e => {
  if (e.key === "Enter") enviarMensagem();
});
 async function enviarMensagem() {
  const input = document.getElementById("chatInput");
  const msg = input.value.trim();
  if (!msg) return;
   exibirMensagem(msg, "user");
  input.value = "";
   exibirMensagem("Digitando...", "bot");
   const resposta = await obterResposta(msg);
   document.querySelectorAll(".chat-msg.bot .bubble").forEach(el => {
    if (el.textContent === "Digitando...") el.remove();
  });
   exibirMensagem(resposta, "bot");
}
 async function obterResposta(pergunta) {
  try {
    const resposta = await fetch("https://chat-proxy-35jb.onrender.com/chat", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ pergunta })
    });
     const dados = await resposta.json();
    return dados.resposta;
  } catch (erro) {
    return "Desculpe, ocorreu um erro ao conectar com a IA.";
  }
}
 function exibirMensagem(texto, tipo) {
  const chat = document.getElementById("chatMsgs");
  const msg = document.createElement("div");
  msg.classList.add("chat-msg", tipo);
  msg.innerHTML = `<div class="bubble">${texto}</div>`;
  chat.appendChild(msg);
  chat.scrollTop = chat.scrollHeight;
}
 document.getElementById("openHelpChat").addEventListener("click", () => {
  const box = document.getElementById("chatAjuda");
  box.classList.toggle("active");
});
 // === ABRIR E FECHAR CHAT DE AJUDA ===
const botaoChat = document.getElementById("openHelpChat");
const caixaChat = document.getElementById("chatAjuda");
 if (botaoChat && caixaChat) {
  botaoChat.addEventListener("click", () => {
    caixaChat.classList.toggle("active");
  });
}
 // ======= Atalhos de teclado para acessibilidade =======
document.addEventListener('keydown', e => {
  if (e.altKey && e.key === '1') mostrar('epis');
  if (e.altKey && e.key === '2') mostrar('riscos');
  if (e.altKey && e.key === '3') mostrar('empresas');
  if (e.altKey && e.key === '4') mostrar('treinamento');
  if (e.altKey && e.key === '5') mostrar('riscos_empresas');
  if (e.altKey && e.key === '6') mostrar('nrs');
  if (e.altKey && e.key === '7') mostrar('painel_tecnico');
});
 let tamanhoFonte = 100;
function ajustarFonte(valor){
  tamanhoFonte = Math.max(80, Math.min(130, tamanhoFonte + valor * 5));
  document.body.style.fontSize = tamanhoFonte + "%";
}
 function playSound(tipo) {
  const som = new Audio(tipo === 'ok' ? 'success.mp3' : 'click.mp3');
  som.volume = 0.4;
  som.play();
}
 function showToast(msg, tipo) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.className = 'toast show ' + (tipo || '');
  playSound(tipo);
  setTimeout(() => { t.classList.remove('show'); }, 1800);
}

document.addEventListener("keydown", (e) => {
  if (e.key === "F12" || (e.ctrlKey && e.shiftKey && e.key === "I")) e.preventDefault();
});

document.addEventListener("DOMContentLoaded", () => {
  const fadeEls = document.querySelectorAll(".bloco, .item");

  const observer = new IntersectionObserver((entries) => {
    let delayCounter = 0;
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        delayCounter++;
        entry.target.classList.add("visible");
        entry.target.setAttribute("data-delay", delayCounter % 5);
        observer.unobserve(entry.target);
      }
    });
  }, { threshold: 0.2 });

  fadeEls.forEach(el => observer.observe(el));
});
	 
async function enviarParaAPI() {
  const csv = document.getElementById("inputCsv").files[0];
  const modelos = document.getElementById("inputModelos").files;

  if (!csv || modelos.length === 0) {
    showToast("‚ö†Ô∏è Envie um CSV e pelo menos um modelo DOCX.", "warn");
    return;
  }

  const formData = new FormData();
  formData.append("csv", csv);
  for (const m of modelos) formData.append("modelos", m);

  try {
    showToast("‚è≥ Gerando certificados, aguarde...", "ok");

    const resposta = await fetch("https://vytor-certificados-api.onrender.com/gerar", {
      method: "POST",
      body: formData
    });

    if (resposta.ok) {
      const blob = await resposta.blob();
      const url = window.URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "certificados.zip";
      document.body.appendChild(a);
      a.click();
      a.remove();
      window.URL.revokeObjectURL(url);
      showToast("‚úÖ Certificados gerados e baixados com sucesso!", "ok");
    } else {
      const erro = await resposta.json();
      showToast("‚ùå Erro: " + erro.mensagem, "err");
    }
  } catch (e) {
    showToast("üö´ Erro ao conectar com o servidor.", "err");
    console.error(e);
  }
}

// Corrige a sobreposi√ß√£o entre header e nav dinamicamente
  function ajustarEspacamentoNav() {
    const header = document.querySelector('header');
    const nav = document.querySelector('nav');
    if (!header || !nav) return;
    const alturaHeader = header.offsetHeight;
    nav.style.top = alturaHeader + 'px';
  }

  window.addEventListener('load', ajustarEspacamentoNav);
  window.addEventListener('resize', ajustarEspacamentoNav);

window.addEventListener("load", () => {
  const header = document.querySelector("header");
  const nav = document.querySelector("nav");
  const main = document.querySelector("main");
  const totalAltura = header.offsetHeight + nav.offsetHeight + 10;
  main.style.paddingTop = totalAltura + "px";
});

document.addEventListener("DOMContentLoaded", () => {
  const header = document.querySelector("header");
  const nav = document.querySelector("nav");
  const main = document.querySelector("main");

  function ajustarEspacamento() {
    const alturaTotal = header.offsetHeight + nav.offsetHeight;
    main.style.paddingTop = alturaTotal + "px";
  }

  ajustarEspacamento();

  // Recalcula em caso de rota√ß√£o, resize ou mudan√ßa de layout
  window.addEventListener("resize", ajustarEspacamento);
  window.addEventListener("orientationchange", ajustarEspacamento);
});

</script>
</body>
</html>
